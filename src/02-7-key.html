<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="alternate" hreflang="x" />

	<meta name="description" content="Calculator" />
	<meta name="author" content="Koryukov Maksim <maxkoryukov@yandex.ru>" />
	<meta name="keywords" content="Calculator" />

	<link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.css" rel="stylesheet" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
	<title>7 Key Numbers - Goal Seek Calculator</title>
	<style>
		.ui.form input:not([readonly])
		{
			background-color: Bisque;
		}
	</style>
</head>
<body>
	<nav class="ui purple inverted secondary menu">
		<ul class="ui container">
			<li class="header item">CFO On-Call</li>
			<li class="active item">
				<a href="#">Home</a>
			</li>
		</ul>
	</nav>
	<main class="ui fluid container">
		<section class="ui segment">
			<h1 class="ui header">7 Key Numbers - Goal Seek Calculator</h1>

			<form class="ui fluid form">

			<div class="ui right labeled input">
				<input type="text" data-bind="value: finance_rate"/>
				<div class="ui label">%</div>
			</div>

			<table class="ui table"><tbody>
				<tr>
					<th class="one wide">Sales (Revenue Growth)</th>
					<td class="one wide">
						<div class="field">
							<div class="ui pointing below label">
								Sales
							</div>
							<div class="ui left labeled input">
								<div class="ui label">$</div>
								<input type="text" data-bind="value: sales_1"/>
							</div>
						</div>
					</td>
					<td class="one wide"></td>
					<td class="one wide">
						<div class="field">
							<div class="ui pointing below label">
								%&nbsp;Change
							</div>
							<div class="ui right labeled input">
								<input type="text" data-bind="value: sales_3"/>
								<div class="ui label">%</div>
							</div>
						</div>
					</td>
					<!--whitespace-->

					<td class="one wide">
						<div class="field">
							<div class="ui left labeled input">
								<div class="ui label">$</div>
								<input type="text" readonly="readonly" data-bind="value: sales_cashflow()"/>
							</div>
						</div>
					</td>
					<td class="one wide">
						<div class="field">
							<div class="ui left labeled input">
								<div class="ui label">$</div>
								<input type="text" readonly="readonly" data-bind="value: sales_cashflow()"/>
							</div>
						</div>
					</td>

					<td class="five wide">
						<p class="explanation">
							% Change x Sales $  +  Change Impact x Finance Rate
						</p>
					</td>
				</tr>


				<tr>
					<th>Cost of Goods Sold</th>
					<td class="one wide">
						<div class="field">
							<div class="ui pointing below label">
								Direct Costs
							</div>
							<div class="ui left labeled input">
								<div class="ui label">$</div>
								<input type="text" data-bind="value: cost_1"/>
							</div>
						</div>
					</td>
					<td>
						<div class="field">
							<div class="ui pointing below label">
								Cost of Sales&nbsp;%
							</div>
							<div class="ui right labeled input">
								<input type="text" readonly="readonly" data-bind="value: cost_sales()"/>
								<div class="ui label">%</div>
							</div>
						</div>
					</td>
					<td>
						<div class="field">
							<div class="ui pointing below label">
								Change in COS&nbsp;%
							</div>
							<div class="ui right labeled input">
								<input type="text" data-bind="value: cost_3"/>
								<div class="ui label">%</div>
							</div>
						</div>
					</td>
					<!--whitespace-->

					<td>
						<div class="field">
							<div class="ui left labeled input">
								<div class="ui label">$</div>
								<input type="text" readonly="readonly" data-bind="value: cost_cashflow()"/>
							</div>
						</div>
					</td>
					<td>
						<div class="field">
							<div class="ui left labeled input">
								<div class="ui label">$</div>
								<input type="text" readonly="readonly" data-bind="value: cost_cashflow()"/>
							</div>
						</div>
					</td>

					<td>
						<p class="explanation">
							% Change x Sales $  +  Change Impact x Finance Rate
						</p>
					</td>
				</tr>

			</tbody></table>
			</form>
		</section>
	</main>

	<script type="text/javascript">
		function Model ()
		{
			this.finance_rate = ko.observable(7.8);

			this.sales_1 = ko.observable(916.05);
			this.sales_3 = ko.observable(30);

			//sales_cashflow: ko.computed(function() { return self.sales_1 * self.sales_3 * (self.finance_rate + 1); } ),
			this.sales_cashflow = ko.pureComputed(function() { return this.sales_1() * this.sales_3() * (this.finance_rate() + 100) / 10000; }, this);

			this.cost_1 = ko.observable(695.238);
			this.cost_3 = ko.observable(-1);
			this.cost_sales = ko.pureComputed(function() { return this.cost_1() * 100 / this.sales_1(); }, this);
			this.cost_cashflow = ko.pureComputed(function() { return -this.cost_1() * this.cost_3() * (this.finance_rate() + 100) / 10000; }, this);
		};

		ko.applyBindings(new Model());
	</script>
</body>
</html>